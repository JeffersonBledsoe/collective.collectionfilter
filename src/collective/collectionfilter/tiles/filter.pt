<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xml:lang="en"
    lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    i18n:domain="collective.collectionfilter">
<body>

<aside class="collectionFilter ${view/filterClassName} pat-collectionfilter"
       tal:define="input_type view/input_type"
       data-pat-collectionfilter='{
          "collectionUUID": "${view/settings/target_collection}",
          "reloadURL": "${view/reload_url}",
          "contentSelector": "${view/settings/content_selector}"
       }'
       tal:condition="view/available">

  <a
      tal:define="edit_url view/edit_url"
      tal:condition="edit_url"
      title="edit filter"
      i18n:attributes="title title-edit-filter"
      href="${edit_url}"
      class="pat-plone-modal edit-link"><span class="fa fa-pencil"/><label i18n:translate="label-edit-filter">edit</label></a>

  <tal:if condition="view/settings/target_collection">
  <header tal:condition="view/title" tal:content="view/title">Title</header>
  <div class="filterContent" tal:define="results view/results">

        <tal:if condition="python:input_type in ('checkbox', 'radio')">
        <ul>
          <tal:items repeat="item results">
          <li tal:attributes="class python:'selected filterItem' if item['selected'] else 'filterItem'">
            <label>
              <input type="checkbox" class="filterControl filteritem"
                  tal:attributes="type input_type;
                                  name view/filter_id;
                                  value item/value;
                                  checked python:'checked' if item['selected'] else None;
                                  data-url item/url"/>
              <span class="filterLabel">
                <span tal:replace="python:item['title'].replace('/', u'/\u00AD')">Item</span>
                <tal:show_count condition="view/settings/show_count">(<span tal:replace="item/count" />)</tal:show_count>
              </span>

            </label>
          </li>
          </tal:items>
        </ul>
        </tal:if>

        <tal:if condition="python:view.input_type == 'dropdown'">
          <select class="filteritem" tal:attributes="name view/filter_id">
          <tal:items repeat="item results">
            <option tal:attributes="
                value item/value;
                selected python:'selected' if item['selected'] else None;
                data-url item/url">
              <span class="filterLabel">
                <span tal:replace="python:item['title'].replace('/', u'/\u00AD')">Item</span>
                <tal:show_count condition="view/settings/show_count">(<span tal:replace="item/count" />)</tal:show_count>
              </span>
            </option>
          </tal:items>
          </select>
        </tal:if>

        <tal:if condition="python:view.input_type == 'link'">
        <ul>
          <tal:items repeat="item results">
          <li tal:attributes="class python:'selected filterItem' if item['selected'] else 'filterItem'">
            <a rel="nofollow"
               class="filteritem"
               tal:attributes="href item/url;
                               title string:Count: ${item/count}">
              <span tal:content="item/title">Item</span>
              <tal:show_count condition="view/settings/show_count">(<span tal:replace="item/count" />)</tal:show_count>
            </a>
          </li>
          </tal:items>
        </ul>
        </tal:if>

  </div>
  </tal:if>
</aside>

</body>
</html>
